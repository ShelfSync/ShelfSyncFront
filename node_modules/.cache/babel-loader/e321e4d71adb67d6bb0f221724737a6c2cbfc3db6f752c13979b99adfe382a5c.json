{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./profile.css';import defaultProfilePic from'./covers/nidarda.JPG';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=()=>{const[profilePic,setProfilePic]=useState(defaultProfilePic);const[currentPassword,setCurrentPassword]=useState('');const[newPassword,setNewPassword]=useState('');const[passwordError,setPasswordError]=useState('');const[user,setUsers]=useState({});const[isPrivate,setIsPrivate]=useState(false);// State for privacy toggle\nuseEffect(()=>{axios.get('./User.json').then(response=>{setUsers(response.data);setIsPrivate(response.data.isPrivate||false);// Set initial value for isPrivate\n}).catch(error=>{console.error(\"There was an error fetching the user data!\",error);});},[]);const navigate=useNavigate();const handleFileChange=event=>{const file=event.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setProfilePic(reader.result);};reader.readAsDataURL(file);}};const handlePasswordChange=event=>{event.preventDefault();if(!currentPassword||!newPassword){setPasswordError('Please fill out all fields.');return;}if(newPassword.length<6){setPasswordError('New password must be at least 6 characters long.');return;}alert('Password changed successfully!');setCurrentPassword('');setNewPassword('');setPasswordError('');};const handlePrivacyChange=event=>{setIsPrivate(event.target.checked);axios.post('/updatePrivacy',{isPrivate:event.target.checked}).then(response=>{console.log('Privacy setting updated');}).catch(error=>{console.error(\"There was an error updating privacy setting!\",error);});};const goToHomePage=()=>{navigate('/main');};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-to-home\",onClick:goToHomePage,children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"img\",{src:profilePic,alt:\"Profile\",className:\"profile-pic\"}),/*#__PURE__*/_jsx(\"h1\",{children:user.username}),/*#__PURE__*/_jsxs(\"label\",{className:\"upload-button\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange}),\"Change Profile Picture\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"p\",{children:user.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Book Count:\"}),/*#__PURE__*/_jsx(\"p\",{children:user.bookCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Private Profile:\"}),/*#__PURE__*/_jsx(\"input\",{style:{color:\"red\"},type:\"checkbox\",checked:isPrivate,onChange:handlePrivacyChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-change\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePasswordChange,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"password-change-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:currentPassword,onChange:e=>setCurrentPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-change-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value)})]}),passwordError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:passwordError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Change Password\"})]})]})]});};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","defaultProfilePic","axios","jsx","_jsx","jsxs","_jsxs","ProfilePage","profilePic","setProfilePic","currentPassword","setCurrentPassword","newPassword","setNewPassword","passwordError","setPasswordError","user","setUsers","isPrivate","setIsPrivate","get","then","response","data","catch","error","console","navigate","handleFileChange","event","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handlePasswordChange","preventDefault","length","alert","handlePrivacyChange","checked","post","log","goToHomePage","className","children","onClick","src","alt","username","type","accept","onChange","bookCount","style","color","onSubmit","value","e"],"sources":["C:/Users/DELL/Desktop/ShelfSyncFront/src/ProfilePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './profile.css';\r\nimport defaultProfilePic from './covers/nidarda.JPG'; \r\nimport axios from 'axios';\r\n\r\nconst ProfilePage = () => {\r\n    const [profilePic, setProfilePic] = useState(defaultProfilePic);\r\n    const [currentPassword, setCurrentPassword] = useState('');\r\n    const [newPassword, setNewPassword] = useState('');\r\n    const [passwordError, setPasswordError] = useState('');\r\n    const [user, setUsers] = useState({});\r\n    const [isPrivate, setIsPrivate] = useState(false); // State for privacy toggle\r\n\r\n    useEffect(() => {\r\n        axios.get('./User.json')\r\n            .then(response => {\r\n                setUsers(response.data);\r\n                setIsPrivate(response.data.isPrivate || false); // Set initial value for isPrivate\r\n            })\r\n            .catch(error => {\r\n                console.error(\"There was an error fetching the user data!\", error);\r\n            });\r\n    }, []);\r\n\r\n    const navigate = useNavigate(); \r\n\r\n    const handleFileChange = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setProfilePic(reader.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handlePasswordChange = (event) => {\r\n        event.preventDefault();\r\n        if (!currentPassword || !newPassword) {\r\n            setPasswordError('Please fill out all fields.');\r\n            return;\r\n        }\r\n        if (newPassword.length < 6) {\r\n            setPasswordError('New password must be at least 6 characters long.');\r\n            return;\r\n        }\r\n        alert('Password changed successfully!');\r\n        setCurrentPassword('');\r\n        setNewPassword('');\r\n        setPasswordError('');\r\n    };\r\n\r\n    const handlePrivacyChange = (event) => {\r\n        setIsPrivate(event.target.checked);\r\n        axios.post('/updatePrivacy', { isPrivate: event.target.checked })\r\n            .then(response => {\r\n                console.log('Privacy setting updated');\r\n            })\r\n            .catch(error => {\r\n                console.error(\"There was an error updating privacy setting!\", error);\r\n            });\r\n    };\r\n\r\n    const goToHomePage = () => {\r\n        navigate('/main'); \r\n    };\r\n\r\n    return (\r\n        <div className=\"profile-container\">\r\n            <div className=\"profile-header\">\r\n                <button className=\"back-to-home\" onClick={goToHomePage}>\r\n                    &larr; \r\n                </button>\r\n                <img src={profilePic} alt=\"Profile\" className=\"profile-pic\" />\r\n                <h1>{user.username}</h1>\r\n                <label className=\"upload-button\">\r\n                    <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n                    Change Profile Picture\r\n                </label>\r\n            </div>\r\n            <div className=\"profile-info\">\r\n                <h2>Profile Information</h2>\r\n                <div className=\"profile-info-item\">\r\n                    <label>Username:</label>\r\n                    <p>{user.username}</p>\r\n                </div>\r\n                <div className=\"profile-info-item\">\r\n                    <label>Book Count:</label>\r\n                    <p>{user.bookCount}</p>\r\n                </div>\r\n                <div className=\"profile-info-item\">\r\n                    <label>Private Profile:</label>\r\n                    <input \r\n                        style= {{color: \"red\"}}\r\n                        type=\"checkbox\" \r\n                        checked={isPrivate} \r\n                        onChange={handlePrivacyChange} \r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"password-change\">\r\n                <h2>Change Password</h2>\r\n                <form onSubmit={handlePasswordChange}>\r\n                    <div className=\"password-change-item\">\r\n                        <label>Current Password:</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={currentPassword}\r\n                            onChange={(e) => setCurrentPassword(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"password-change-item\">\r\n                        <label>New Password:</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={newPassword}\r\n                            onChange={(e) => setNewPassword(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    {passwordError && <div className=\"error-message\">{passwordError}</div>}\r\n                    <button type=\"submit\">Change Password</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfilePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}